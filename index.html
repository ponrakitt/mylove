<!DOCTYPE html>
<html lang="th" data-theme="auto">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞</title>
<meta name="theme-color" content="#ffd9e6"/>

<style>
  :root{
    --bg:#fff6fa; --card:#ffffff; --text:#3a2a33; --muted:#6b6b6b;
    --accent:#ff6b9e; --accent2:#ffcad4; --ok:#16a34a; --lock:#7c3aed;
    --ring:rgba(255,107,158,.35);
    --shadow:0 10px 30px rgba(0,0,0,.10);
    --radius:24px; --vh:1vh;
  }
  @media (prefers-color-scheme: dark){
    [data-theme="auto"]{
      --bg:#0f0a11; --card:#17121a; --text:#f5e9f1; --muted:#bca9b5;
      --accent:#ff8fb5; --accent2:#4d2838; --ok:#34d399; --lock:#a78bfa;
      --ring:rgba(255,143,181,.25); --shadow:0 10px 30px rgba(0,0,0,.45);
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%; margin:0}
  body{
    font-family: ui-rounded, "Noto Sans Thai", "Sarabun", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(1200px 1200px at 100% -10%, var(--accent2) 0%, transparent 60%),
      radial-gradient(900px 900px at -10% 110%, var(--accent2) 0%, transparent 60%),
      var(--bg);
    color:var(--text); line-height:1.6;
  }
  .wrap{ min-height:calc(var(--vh)*100); display:grid; place-items:center; padding:20px; }
  .card{ width:min(980px,100%); background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
         border:1px solid rgba(255,255,255,.12); padding:clamp(16px,3vw,28px); }
  .title{ display:flex; align-items:center; justify-content:center; gap:10px; font-size:clamp(22px,4.5vw,34px); font-weight:800; margin:0 0 4px; }
  .subtitle{ text-align:center; color:var(--muted); margin:0 0 18px; font-size:clamp(12px,2.6vw,14px); }
  .grid{ display:grid; grid-template-columns:1fr; gap:14px; } @media (min-width:760px){ .grid{ grid-template-columns:1fr 1fr; } }
  .letter-card{ background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.65)), var(--card);
                border:1px solid rgba(0,0,0,.06); border-radius:20px; padding:18px; position:relative; overflow:hidden; }
  .letter-card::after{ content:""; position:absolute; inset:0; pointer-events:none;
                       background:radial-gradient(400px 120px at 80% 0%, var(--ring), transparent 60%),
                                  radial-gradient(220px 90px at 10% 100%, var(--ring), transparent 60%);
                       mix-blend-mode:plus-lighter; }
  .badge{ display:inline-flex; align-items:center; gap:8px; font-weight:700; font-size:14px; background:rgba(255,255,255,.6);
          border:1px dashed rgba(0,0,0,.15); padding:6px 10px; border-radius:999px; backdrop-filter:blur(6px); }
  .h{ font-size:clamp(18px,2.8vw,22px); font-weight:800; margin:10px 0 6px; }
  .muted{ color:var(--muted); font-size:13px }
  .btn{ appearance:none; border:0; cursor:pointer; background:linear-gradient(180deg, var(--accent), #ff4f8f); color:#fff;
        font-weight:800; letter-spacing:.2px; border-radius:14px; padding:12px 16px; width:100%;
        box-shadow:0 8px 18px rgba(255,79,143,.35); transition:transform .06s ease, box-shadow .2s ease, filter .2s ease; }
  .btn:hover{ transform:translateY(-1px); filter:brightness(1.02) } .btn:active{ transform:translateY(1px) }
  .btn-ghost{ background:transparent; color:var(--text); border:1px solid rgba(0,0,0,.15); box-shadow:none; }
  .lock{ color:var(--lock); font-weight:900; display:inline-flex; align-items:center; gap:8px; }
  .ok{ color:var(--ok); font-weight:800 }
  .row{ display:flex; gap:8px } .row>*{ flex:1 }
  .modal{ position:fixed; inset:0; display:none; place-items:center; padding:18px; background:rgba(0,0,0,.45); z-index:50; }
  .modal.open{ display:grid; }
  .paper{ width:min(760px,100%); max-height:min(85vh, calc(var(--vh)*85)); background:#fff; color:#2c1f25; border-radius:18px; box-shadow:var(--shadow); overflow:hidden; display:flex; flex-direction:column; }
  @media (prefers-color-scheme: dark){ .paper{ background:#fffdfc; color:#2d2228; } }
  .paper-head{ padding:14px 16px; display:flex; align-items:center; justify-content:space-between; background:repeating-linear-gradient(-45deg,#ffd9e6,#ffd9e6 10px,#ffe8f0 10px,#ffe8f0 20px); }
  .paper-title{ font-weight:900; }
  .x{ border:0; background:transparent; font-size:22px; cursor:pointer; line-height:1; }
  .paper-body{ padding:20px; overflow:auto; background:linear-gradient(transparent 38px, rgba(255,107,158,.06) 38px) 0 0/100% 40px, #fff; }
  /* Media (images) */
  .media{ display:grid; gap:10px; margin:0 0 12px 0; }
  .media img{ width:100%; display:block; border-radius:14px; }
  .media .cap{ font-size:12px; color:#7a6b73; margin-top:2px; }
  @media (min-width:680px){
    .media.grid2{ grid-template-columns:1fr 1fr; }
  }
  .content{ white-space:pre-wrap; font-size:clamp(14px,2.4vw,16px); }
  .hint{ font-size:12px; color:#7a6b73; margin-top:10px; }
  .toast{ position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background:#111; color:#fff; padding:10px 14px; border-radius:999px; box-shadow:0 8px 18px rgba(0,0,0,.35); font-size:13px; display:none; z-index:60; }
  .toast.show{ display:block; animation:fade .25s ease-out }
  @keyframes fade{ from{ transform:translateX(-50%) translateY(6px); opacity:0 } }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1 class="title">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞</h1>
    <p class="subtitle">‡∏°‡∏µ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏°‡∏≤‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏ö‡∏ö</p>

    <div class="grid">
      <!-- Letter 1 -->
      <section class="letter-card" id="card1">
        <span class="badge">üíå ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 1</span>
        <h3 class="h">‚Äú‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏µ ‡πÜ‚Äù</h3>
        <p class="muted">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
        <div class="row" style="margin-top:10px">
          <button class="btn" id="open1">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 1</button>
        </div>
      </section>

      <!-- Letter 2 -->
      <section class="letter-card" id="card2">
        <span class="badge lock">üîí ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 2 (‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¢‡∏π‡πà)</span>
        <h3 class="h">‚Äú‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‚Äù</h3>
        <p class="muted" id="openAtWrap">‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô: <span id="openAt"></span></p>
        <div id="countdownWrap" style="margin:8px 0 6px 0">
          <span class="countdown" id="countdown">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤...</span>
        </div>
        <div class="row" style="margin-top:10px">
          <button class="btn btn-ghost" id="open2">‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 2</button>
        </div>
        <p class="muted" id="lockNote" style="margin-top:8px">*‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞</p>
      </section>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="paper" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="paper-head">
      <strong class="paper-title" id="modalTitle">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢</strong>
      <button class="x" id="close" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">‚úï</button>
    </div>
    <div class="paper-body">
      <!-- ‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô div ‡∏ô‡∏µ‡πâ -->
      <div class="media" id="modalMedia" style="display:none"></div>
      <!-- ‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (‡∏¢‡∏±‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
      <img class="img" id="modalImg" alt="" style="display:none"/>
      <div class="content" id="modalContent"></div>
      <div class="hint" id="modalHint"></div>
    </div>
  </div>
</div>

<div class="toast" id="toast">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üí´</div>

<script>
/* ========= CONFIG =========
   - ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢ #2: unlockAtISO (ISO8601 +07:00)
   - ‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß: imageSrc
   - ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ: images = [{src, alt, caption}]
   - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ images ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô imageSrc
   - DEV_PREVIEW: true = ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
   - HIDE_OPEN_DATETIME / HIDE_COUNTDOWN: ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°/‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
=========================== */
const CONFIG = {
  pageTitle: "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 7 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö",
  DEV_PREVIEW: false,
  HIDE_OPEN_DATETIME: true,
  HIDE_COUNTDOWN: true,
  letter1: {
    title: "‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 1",
    imageSrc: "",
    content: `üíå ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏µ‡πÜ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡∏ï‡∏•‡∏≠‡∏î7‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö
‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏≤‡∏ä‡πâ‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏µ‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà
‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏à‡∏∞‡∏£‡∏≠‡∏ô‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏µ‡∏Å‡∏ã‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÜ‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö

‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏´‡∏£‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏ô‡πâ‡∏≠‡∏á‡∏à‡∏∞‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏£‡∏∂‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏∞‡πÅ‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£
‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‡πÄ‡∏£‡∏≤‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡πÜ
‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏ö‡∏≠‡∏Å‡∏•‡∏≤‡∏´‡∏£‡∏≠‡∏Å‡∏ô‡∏∞ :)

‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏£‡∏≠‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏∞
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏≠‡∏µ‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏ó‡∏µ‡πà ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏á‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏£‡∏≠‡∏ô‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏≥‡πÑ‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö

‡∏£‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏™‡∏°‡∏≠
‡∏à‡∏≤‡∏Å ‡πÇ‡∏≠‡πä‡∏Ñ

‡∏õ.‡∏•. ‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á 2 ‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡πÜ ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö
‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á 2 ‡∏â‡∏ö‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏Ç‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏µ‡∏Å‡∏â‡∏ö‡∏±‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üòâ`
  },
  letter2: {
    title: "‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 2",
    unlockAtISO: "2025-12-01T20:00:00+07:00",
    /* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á:
       1) ‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß */
    imageSrc: "",
    /* 2) ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ */
    images: [
      // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
      // { src: "images/us-2a.jpg", alt: "‡πÄ‡∏£‡∏≤‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©", caption: "‡∏Ñ‡πà‡∏≥‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà (‚Ä¶)" },
      // { src: "images/us-2b.jpg", alt: "‡πÇ‡∏ï‡πä‡∏∞‡∏≠‡∏≤‡∏´‡∏≤‡∏£", caption: "‡∏°‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤" }
    ],
    content: `(‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏µ‡πà 2)
‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÇ‡∏≠‡πä‡∏Ñ‡∏ñ‡∏∂‡∏á‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡πà‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ üíñ`
  }
};
/* ========================= */

document.title = CONFIG.pageTitle || document.title;

/* fix 100vh on mobile */
const setVh = () => document.documentElement.style.setProperty('--vh', `${window.innerHeight*0.01}px`);
setVh(); addEventListener('resize', setVh);

/* Elements */
const open1Btn = document.getElementById('open1');
const open2Btn = document.getElementById('open2');
const modal = document.getElementById('modal');
const closeBtn = document.getElementById('close');
const modalTitle = document.getElementById('modalTitle');
const modalContent = document.getElementById('modalContent');
const modalImg = document.getElementById('modalImg');
const modalMedia = document.getElementById('modalMedia');
const modalHint = document.getElementById('modalHint');
const toast = document.getElementById('toast');

/* Utils */
function openModal({title, content, img, images, hint}){
  modalTitle.textContent = title || "‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢";
  modalContent.textContent = content || "";
  // ‡πÅ‡∏™‡∏î‡∏á ‚Äú‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‚Äù ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ images
  if (Array.isArray(images) && images.length > 0){
    modalMedia.innerHTML = images.map(({src, alt, caption})=>{
      const cap = caption ? `<div class="cap">${caption}</div>` : "";
      const safeAlt = alt || "";
      return `<figure><img src="${src}" alt="${safeAlt}">${cap}</figure>`;
    }).join("");
    modalMedia.style.display = "grid";
    // layout 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ >= 2
    modalMedia.classList.toggle('grid2', images.length >= 2);
    modalImg.style.display = "none";
  }else{
    // ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ -> ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
    modalMedia.style.display = "none";
    modalMedia.innerHTML = "";
    if (img){
      modalImg.src = img; modalImg.style.display = "block";
    }else{
      modalImg.removeAttribute('src'); modalImg.style.display = "none";
    }
  }
  modalHint.textContent = hint || "";
  modal.classList.add('open');
}
function closeModal(){ modal.classList.remove('open'); }
closeBtn.addEventListener('click', closeModal);
modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

/* Letter 1 */
open1Btn.addEventListener('click', ()=>{
  openModal({
    title: CONFIG.letter1.title,
    content: CONFIG.letter1.content,
    img: (CONFIG.letter1.imageSrc||"").trim() || null,
    images: [], // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ
    hint: "‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÉ‡∏à‡∏ô‡∏∞ üíó"
  });
});

/* Letter 2 Lock Logic */
const unlockDate = new Date(CONFIG.letter2.unlockAtISO);
const openAtEl   = document.getElementById('openAt');
const openAtWrap = document.getElementById('openAtWrap');
const countdownEl   = document.getElementById('countdown');
const countdownWrap = document.getElementById('countdownWrap');
const lockNote = document.getElementById('lockNote');

function formatThaiDate(d){
  try{ return d.toLocaleString('th-TH',{dateStyle:'full', timeStyle:'short', timeZone:'Asia/Bangkok'}); }
  catch{ return d.toLocaleString(); }
}

/* ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ + ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á */
if (CONFIG.HIDE_OPEN_DATETIME) openAtWrap?.style.setProperty('display','none');
else openAtEl.textContent = formatThaiDate(unlockDate);
if (CONFIG.HIDE_COUNTDOWN) countdownWrap?.style.setProperty('display','none');

let unlocked = false;
function updateCountdown(){
  const now = new Date();
  let diff = unlockDate - now;
  if (CONFIG.DEV_PREVIEW) diff = -1;
  if (diff <= 0){
    unlocked = true;
    lockNote.innerHTML = `<span class="ok">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß ‚ú®</span>`;
    if (!CONFIG.HIDE_COUNTDOWN && countdownEl){
      countdownEl.innerHTML = `<span class="ok">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß ‚ú®</span>`;
    }
    return;
  }
  if (!CONFIG.HIDE_COUNTDOWN && countdownEl){
    const s = Math.floor(diff/1000)%60;
    const m = Math.floor(diff/1000/60)%60;
    const h = Math.floor(diff/1000/60/60)%24;
    const d = Math.floor(diff/1000/60/60/24);
    countdownEl.textContent = `${d} ‡∏ß‡∏±‡∏ô ${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }
}
updateCountdown();
setInterval(updateCountdown, 1000);

function showToast(msg){
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(()=> toast.classList.remove('show'), 2000);
}

open2Btn.addEventListener('click', ()=>{
  if (!unlocked){
    showToast('‡∏¢‡∏±‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏∞üí´');
    return;
  }
  const imgs = Array.isArray(CONFIG.letter2.images) ? CONFIG.letter2.images : [];
  openModal({
    title: CONFIG.letter2.title,
    content: CONFIG.letter2.content,
    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ images ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô imageSrc
    images: imgs.length ? imgs : [],
    img: imgs.length ? null : ((CONFIG.letter2.imageSrc||"").trim() || null),
    hint: "‡∏î‡∏µ‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡πà‡∏≤‡∏ô‡∏ô‡∏∞ üíû"
  });
});
</script>
</body>
</html>
